(this["webpackJsonpvk-stats-app"]=this["webpackJsonpvk-stats-app"]||[]).push([[0],{125:function(e,t,n){e.exports=n(164)},144:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(33),s=n.n(c),u=n(22),i=n(16),l=n.n(i),p=n(35),m=n(25),d=n(32),h=n(60),f=n(61),E=n(9),v={loadingUser:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_INFO_REQ":return Object(E.a)({},e,{loadingUser:!0});case"GET_USER_INFO_RES":return Object(E.a)({},e,{},t.payload,{loadingUser:!1});default:return e}},g={},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;return"GET_AUTH_TOKEN_RES"===t.type?Object(E.a)({},e,{},t.payload):e},y={loadingGroup:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUP_REQ":return Object(E.a)({},e,{loadingGroup:!0});case"GET_GROUP_RES":return Object(E.a)({},e,{},t.payload.response[0],{loadingGroup:!1});case"GROUP_RESET_RES":return Object(E.a)({},y);default:return e}},k={loadingGroups:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUPS_REQ":return Object(E.a)({},e,{loadingGroups:!0});case"GET_GROUPS_RES":return Object(E.a)({},e,{},t.payload.response,{loadingGroups:!1});default:return e}},S={popout:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POPOUT":return Object(E.a)({},e);case"SET_POPOUT":return Object(E.a)({},e,{popout:t.block});default:return e}},R={modal:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MODAL":return Object(E.a)({},e);case"SET_MODAL":return Object(E.a)({},e,{modal:t.block});default:return e}},T={loadingFriends:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FRIENDS_REQ":return Object(E.a)({},e,{loadingFriends:!0});case"GET_FRIENDS_RES":return Object(E.a)({},e,{},t.payload.response,{loadingFriends:!1});default:return e}},w={loadingResolveScreenName:!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RESOLVE_SCREEN_NAME_REQ":return Object(E.a)({},e,{loadingResolveScreenName:!0});case"GET_RESOLVE_SCREEN_NAME_RES":return Object(E.a)({},e,{},t.payload.response,{loadingResolveScreenName:!1});default:return e}},U={loadingUserBy:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_REQ":return Object(E.a)({},e,{loadingUserBy:!0});case"GET_USER_RES":return Object(E.a)({},e,{},t.payload,{loadingUserBy:!1});default:return e}},I={loadingExecuteGetMembers:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EXECUTE_GET_MEMBERS_REQ":return Object(E.a)({},e,{loadingExecuteGetMembers:!0});case"GET_EXECUTE_GET_MEMBERS_RES":return Object(E.a)({},e,{},t.payload.response,{loadingExecuteGetMembers:!1});default:return e}},N=Object(d.c)({routing:p.routerReducer,user:_,token:b,group:O,groups:j,popoutApp:G,modalApp:x,friends:A,utils:C,userBy:P,execute:M}),F=Object(h.createLogger)(),L=Object(p.routerMiddleware)(u.d),B=Object(d.a)(f.a,L,F)(d.d),D=n(23),Q=n(29),H=n(26),K=n(24),V=n(27),z=(n(144),n(4)),W=n(73),q=n.n(W),X=n(74),J=n.n(X),Y=n(75),Z=n.n(Y),$=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).state=void 0,n.onStoryChange=function(e){var t=e.currentTarget.dataset.story;n.setState({activeStory:t}),u.d.push("".concat(t))},n.render=function(){var e=n.state.activeStory;return o.a.createElement(z.x,null,o.a.createElement(z.y,{onClick:function(e){return n.onStoryChange(e)},selected:"/"===e,"data-story":"/",text:"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f"},o.a.createElement(Z.a,null)),o.a.createElement(z.y,{onClick:function(e){return n.onStoryChange(e)},selected:"/contacts"===e,"data-story":"/contacts",text:"\u041f\u043e\u0438\u0441\u043a"},o.a.createElement(q.a,null)),o.a.createElement(z.y,{onClick:function(e){return n.onStoryChange(e)},selected:"/faq"===e,"data-story":"/faq",text:"\u041f\u043e\u043c\u043e\u0449\u044c"},o.a.createElement(J.a,null)))},n.state={activeStory:u.d.getCurrentLocation().pathname},n}return Object(V.a)(t,e),t}(o.a.Component),ee=Object(m.b)((function(e){return{state:e,activeStory:e.activeStory}}),(function(e){return{dispatch:e}}))($),te=function(e){var t=e.popout,n=e.modal;return o.a.createElement(z.z,{popout:t,modal:n,activePanel:e.id},o.a.createElement(z.p,{id:e.id},e.children,o.a.createElement(ee,null)))},ne=Object(m.b)((function(e){return{popout:e.popoutApp.popout,modal:e.modalApp.modal}}))(te),re=n(6),ae=n.n(re),oe=n(10),ce=function(e){return function(t){t({type:"SET_MODAL",block:e})}},se=(n(155),function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).getUser=Object(oe.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.getUserInfo,e.next=3,t();case 3:case"end":return e.stop()}}),e)}))),n.render=function(){var e=n.props,t=e.loadingUser,r=e.user;return o.a.createElement("div",{className:"User"},t&&o.a.createElement(z.w,{size:"medium"}),r.first_name&&o.a.createElement(z.s,{status:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",before:o.a.createElement(z.b,{size:36,src:r.photo_100}),aside:""},r.first_name," ",r.last_name))},n.props.user.first_name||n.getUser(),n}return Object(V.a)(t,e),t}(o.a.Component)),ue=Object(m.b)((function(e){return{state:e,user:e.user,loadingUser:e.user.loadingUser}}),(function(e){return{dispatch:e,getUserInfo:function(){return e(function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USER_INFO_REQ"}),e.prev=1,e.next=4,l.a.sendPromise("VKWebAppGetUserInfo");case 4:return n=e.sent,t({type:"GET_USER_INFO_RES",payload:n}),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),t({type:"GET_USER_INFO_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(se),ie=(n(156),function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(a)))).render=function(){return o.a.createElement("div",{className:"Balance"},o.a.createElement("div",{className:"count"},"0 \u0440\u0443\u0431"),o.a.createElement("div",{className:"title"},"\u0411\u0430\u043b\u0430\u043d\u0441"))},n}return Object(V.a)(t,e),t}(o.a.Component)),le=n(76),pe=n.n(le),me=n(77),de=n.n(me),he=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).render=function(){return o.a.createElement(ne,{id:"home"},o.a.createElement(z.q,null,"\u0410\u043d\u0430\u043b\u0438\u0437 \u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),o.a.createElement(z.h,{className:"profile"},o.a.createElement(ue,null),o.a.createElement(ie,null)),o.a.createElement(z.v,{wide:!0}),o.a.createElement(z.l,{className:"navigationList"},o.a.createElement(u.a,{to:"/groups"},o.a.createElement(z.f,{before:o.a.createElement(de.a,null)},"\u041e\u0431\u0449\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438")),o.a.createElement(z.v,{wide:!0}),o.a.createElement(u.a,{to:"/contacts"},o.a.createElement(z.f,{before:o.a.createElement(pe.a,null)},"\u0423\u0437\u043d\u0430\u0442\u044c \u0441\u043a\u0440\u044b\u0442\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"))))},n.fetchData(),n}return Object(V.a)(t,e),Object(Q.a)(t,[{key:"fetchData",value:function(){(0,this.props.getAuthToken)()}}]),t}(o.a.Component),fe=Object(m.b)(null,(function(e){return{dispatch:e,getAuthToken:function(){return e(function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_AUTH_TOKEN_REQ"}),e.prev=1,e.next=4,l.a.sendPromise("VKWebAppGetAuthToken",{app_id:7312864,scope:"groups,stats"});case 4:return n=e.sent,t({type:"GET_AUTH_TOKEN_RES",payload:n}),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),t({type:"GET_AUTH_TOKEN_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(he),Ee=(n(157),function(){return o.a.createElement(ne,{id:"contacts"},o.a.createElement(z.q,null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),o.a.createElement(z.h,null,"Contacts page..."))}),ve=function(){return o.a.createElement(ne,{id:"faq"},o.a.createElement(z.q,null,"\u041f\u043e\u043c\u043e\u0449\u044c"),o.a.createElement(z.i,{separator:"hide",header:o.a.createElement(z.j,{mode:"secondary"},"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u043d\u043e\u0435?")},o.a.createElement(z.e,null,o.a.createElement(z.d,{size:"l"},o.a.createElement(z.h,null,"\u0423 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043d\u043e \u0432 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u0435\u0442 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b.")))),o.a.createElement(z.i,{separator:"hide",header:o.a.createElement(z.j,{mode:"secondary"},"\u0418\u0434\u0435\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f")},o.a.createElement(z.e,null,o.a.createElement(z.d,{size:"l"},o.a.createElement(z.h,null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u0430\u043c \u0441\u0432\u043e\u044e \u0438\u0434\u0435\u044e, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438.")))))},_e=n(28),ge=n(78),be=n.n(ge),ye=(n(158),n(79)),Oe=n.n(ye),ke=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(H.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(a)))).render=function(){var e=n.props,t=e.id,r=e.photo,a=e.removeHandler,c=e.membersCount;return o.a.createElement("div",{className:"groupItem"},o.a.createElement("div",{className:"photo"},o.a.createElement(z.b,{src:r})),o.a.createElement("div",{className:"remove",onClick:function(e){return a(t)}},o.a.createElement(z.b,{style:{background:"var(--destructive)"},size:24},o.a.createElement(Oe.a,{fill:"var(--white)"}))),c>0&&o.a.createElement("div",{className:"membersCount"},n.getMembersCount(c)))},n}return Object(V.a)(t,e),Object(Q.a)(t,[{key:"getMembersCount",value:function(e){var t="".concat(e),n=parseFloat((e/1e6).toFixed(1));return Math.trunc(n)>0?t="".concat(n,"\u041c"):(n=parseFloat((e/1e3).toFixed(1)),Math.trunc(n)>0?t="".concat(n,"\u041a"):t)}}]),t}(o.a.Component),je=n(43),Se=n.n(je),Ge=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).state=void 0,n.modalBack=function(){return(0,n.props.setModalApp)(!1),{}},n.selectItem=function(e){(0,n.props.addItemHandler)(e),n.modalBack()},n.state={search:"",items:[]},n.onChange=n.onChange.bind(Object(_e.a)(n)),n}return Object(V.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"onChange",value:function(e){if(e.target.value.indexOf("com/")>=0){var t=e.target.value.split("com/")[1];this.isItem(t)||this.getResolveScreenName(t)}this.setState({search:e.target.value})}},{key:"getResolveScreenName",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r,a,o;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.token,a=n.getResolveScreenName,e.next=3,a(t,r.access_token);case 3:if((o=e.sent)&&o.type){e.next=7;break}return console.log("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"),e.abrupt("return");case 7:e.t0=o.type,e.next="group"===e.t0?10:"page"===e.t0?10:"user"===e.t0?13:16;break;case 10:return e.next=12,this.searchGroup(o.object_id);case 12:return e.abrupt("break",17);case 13:return e.next=15,this.searchUser(o.object_id);case 15:return e.abrupt("break",17);case 16:console.log("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isItem",value:function(e){for(var t=this.state.items,n=0;n<t.length;n++)if(t[n].screen_name===e)return!0;return!1}},{key:"searchGroup",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r,a,o,c,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.token,a=n.getGroup,e.next=3,a(t,r.access_token);case 3:o=e.sent,c=this.state.items,(s=c)[s.length]={id:o.id,name:o.name,photo_50:o.photo_50,screen_name:o.screen_name,members_count:o.members_count},this.setState({items:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchUser",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r,a,o,c,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.token,a=n.getUser,e.next=3,a(t,r.access_token);case 3:o=e.sent,c=this.state.items,(s=c)[s.length]={id:o.id,name:"".concat(o.first_name," ").concat(o.last_name),photo_50:o.photo_50,screen_name:o.domain},this.setState({items:s});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupsList();case 2:return e.next=4,this.getFriendsList();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGroupsList",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.token,r=t.getGroups,a=t.groups,o=a,c=this.state.items,o.count){e.next=7;break}return e.next=6,r(n.access_token);case 6:o=e.sent;case 7:o=o.items.map((function(e){return{id:e.id,name:e.name,photo_50:e.photo_50,screen_name:e.screen_name,members_count:e.members_count}})),this.setState({items:c.concat(o)});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFriendsList",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.token,r=t.getFriends,a=t.friends,o=a,c=this.state.items,o.count){e.next=7;break}return e.next=6,r(n.access_token);case 6:o=e.sent;case 7:o=o.items.map((function(e){return{id:e.id,name:"".concat(e.first_name," ").concat(e.last_name),screen_name:e.domain,photo_50:e.photo_50}})),this.setState({items:c.concat(o)});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.loadingGroups,r=t.loadingFriends,a=n||r,c=this.state.search;return o.a.createElement(z.o,{activeModal:"modalFormAddGroups"},o.a.createElement(z.m,{id:"modalFormAddGroups",dynamicContentHeight:!0,onClose:this.modalBack,header:o.a.createElement(z.n,{left:o.a.createElement(z.r,{onClick:this.modalBack},o.a.createElement(Se.a,null))},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")},o.a.createElement(z.u,{value:c,onChange:this.onChange}),a&&o.a.createElement(z.h,null,o.a.createElement(z.w,{size:"medium"})),!a&&c.length>0&&o.a.createElement(z.l,null,this.items.slice(0,5).map((function(t){return o.a.createElement(z.f,{before:o.a.createElement(z.b,{size:40,src:t.photo_50}),onClick:function(){return e.selectItem(t)},key:t.screen_name},t.name)}))),!a&&0===c.length&&o.a.createElement(z.h,{style:{color:"gray"}},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0438\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.")))}},{key:"items",get:function(){var e=this.state,t=e.search,n=e.items,r=t.indexOf("com/")>=0,a="";return r&&(a=t.split("com/")[1]),n.filter((function(e){var n=e.name,o=e.screen_name;return r?o.toLowerCase().indexOf(a.toLowerCase())>-1:n.toLowerCase().indexOf(t.toLowerCase())>-1}))}}]),t}(o.a.Component),Re=Object(m.b)((function(e){return{state:e,token:e.token,groups:e.groups,group:e.group,userBy:e.userBy,utils:e.utils,friends:e.friends,loadingGroups:e.groups.loadingGroups,loadingFriends:e.groups.loadingFriends,loadingGroup:e.group.loadingGroup,loadingUserBy:e.group.loadingUserBy,loadingResolveScreenName:e.utils.loadingResolveScreenName,modal:e.modalApp.modal}}),(function(e){return{dispatch:e,setModalApp:function(t){return e(ce(t))},getGroups:function(t){return e(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_GROUPS_REQ"}),t.prev=1,t.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.get",params:{extended:"1",fields:"id,is_admin,admin_level,name,photo_50,screen_name,type,members_count",v:"5.102",access_token:e}});case 4:return r=t.sent,n({type:"GET_GROUPS_RES",payload:r}),t.abrupt("return",r.response);case 9:t.prev=9,t.t0=t.catch(1),n({type:"GET_GROUPS_FAIL",payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},getFriends:function(t){return e(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_FRIENDS_REQ"}),t.prev=1,t.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"friends.get",params:{fields:"photo_50, domain",v:"5.102",access_token:e}});case 4:return r=t.sent,n({type:"GET_FRIENDS_RES",payload:r}),t.abrupt("return",r.response);case 9:t.prev=9,t.t0=t.catch(1),n({type:"GET_FRIENDS_FAIL",payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},getGroup:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_GROUP_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.getById",params:{group_id:e,fields:"id,is_admin,admin_level,name,photo_50,screen_name,type,members_count",v:"5.102",access_token:t}});case 4:return a=n.sent,r({type:"GET_GROUP_RES",payload:a}),n.abrupt("return",a.response[0]);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_GROUP_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getUser:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_USER_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"users.get",params:{user_ids:e,fields:"photo_50, domain",v:"5.102",access_token:t}});case 4:return a=n.sent,r({type:"GET_USER_RES",payload:a}),n.abrupt("return",a.response[0]);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_USER_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getResolveScreenName:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_RESOLVE_SCREEN_NAME_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"utils.resolveScreenName",params:{screen_name:e,v:"5.27",https:1,access_token:t}});case 4:return a=n.sent,r({type:"GET_RESOLVE_SCREEN_NAME_RES",payload:a}),n.abrupt("return",a.response);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_RESOLVE_SCREEN_NAME_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(Ge),xe=(n(159),n(80)),Te=n.n(xe),Ae=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).render=function(){var e=n.state,t=e.progress,r=e.process,a=e.intersec,c=e.isStart,s=n.props.items;return o.a.createElement("div",null,s.length>1&&o.a.createElement(z.h,null,o.a.createElement(z.c,{onClick:n.startButton,before:o.a.createElement(Te.a,null),disabled:r},"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435")),r&&o.a.createElement(z.h,null,o.a.createElement(z.k,{header:!1,title:"Default"},o.a.createElement(z.t,{value:t}))),!r&&c&&o.a.createElement(z.h,null,"\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043e\u0431\u0449\u0438\u0445 ",a.length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432."))},n.state={progress:0,process:!1,intersec:[],isStart:!1},n.startButton=n.startButton.bind(Object(_e.a)(n)),n}return Object(V.a)(t,e),Object(Q.a)(t,[{key:"start",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,c,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.startProcess(),t=this.props.items,n=0,r=0;r<t.length;r++)n+=t[r].members_count;a=0,o=[],c=0;case 7:if(!(c<t.length)){e.next=17;break}return e.next=10,this.getMembersByGroupId(t[c].id,t[c].members_count,n,a);case 10:s=(s=e.sent).map((function(e){return parseInt(e)})),a+=s.length,o=0===o.length?s:this.intersecSortArr(o,s);case 14:c++,e.next=7;break;case 17:this.setState({intersec:o}),this.stopProcess();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"intersecSortArr",value:function(e,t){for(var n=e.length,r=t.length,a=0,o=0,c=0,s=[];a<n&&c<r;)e[a]===t[c]?(s[o]=e[a],o++,a++,c++):e[a]<t[c]?a++:c++;return s}},{key:"getMembersByGroupId",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,a){var o,c,s,u,i,l,p,m,d;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},c=this.props,s=c.token,u=c.getExecuteGetMembers,i=[],l=0;case 4:if(!(i.length<n&&l<n)){e.next=17;break}return e.next=7,u(t,l,n,s.access_token);case 7:return p=e.sent,i=i.concat(p),l+=25e3,m=a+i.length,d=Math.ceil(m/r*100),this.setProgress(d),e.next=15,o(334);case 15:e.next=4;break;case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"startProcess",value:function(){console.log("startProcess"),this.setState({progress:0,process:!0})}},{key:"setProgress",value:function(e){this.setState({progress:e})}},{key:"stopProcess",value:function(){console.log("stopProcess"),this.setState({progress:0,process:!1})}},{key:"startButton",value:function(){this.start(),this.setState({isStart:!0})}}]),t}(o.a.Component),we=Object(m.b)((function(e){return{state:e,token:e.token,execute:e.execute,loadingExecuteGetMembers:e.execute.loadingExecuteGetMembers}}),(function(e){return{dispatch:e,getExecuteGetMembers:function(t,n,r,a){return e(function(e,t,n,r){return function(){var a=Object(oe.a)(ae.a.mark((function a(o){var c;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o({type:"GET_EXECUTE_GET_MEMBERS_REQ"}),a.prev=1,a.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"execute.getMembers",params:{group_id:e,offset:t,total_count:n,v:"5.102",access_token:r}});case 4:return c=a.sent,o({type:"GET_EXECUTE_GET_MEMBERS_RES",payload:c}),a.abrupt("return",c.response);case 9:a.prev=9,a.t0=a.catch(1),o({type:"GET_EXECUTE_GET_MEMBERS_FAIL",payload:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,r,a))}}}))(Ae),Ce=(n(160),function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(H.a)(this,Object(K.a)(t).call(this,e))).state=void 0,n.addItem=function(e){console.log(e);var t=n.state.groups;t[t.length]=e,n.setState({groups:t})},n.render=function(){var e=n.state.groups;return o.a.createElement("div",null,o.a.createElement(z.g,{onClick:n.openAddGroupForm,before:o.a.createElement(be.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e"),o.a.createElement(z.v,{wide:!0}),e.length>0&&o.a.createElement("div",null,o.a.createElement("div",{className:"groupsList"},e.map((function(e){return o.a.createElement(ke,{key:e.id,photo:e.photo_50,id:e.id,membersCount:e.members_count,removeHandler:n.removeHandler})}))),o.a.createElement(we,{items:n.state.groups})))},n.state={groups:[{id:45653506,name:"\u0410\u0444\u0438\u0448\u0430 \u0413\u0440\u0430\u0445\u043e\u0432\u043e",screen_name:"afisha_grahovo",members_count:4261,photo_50:"https://sun7-7.userapi.com/c633829/v633829634/340e0/YSG7c2uY8-g.jpg?ava=1"},{id:87771814,name:"\u0421\u0415\u041b\u042c\u0421\u041a\u0410\u042f \u041d\u041e\u0412\u042c. \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442\u0430\u043b. \u0413\u0440\u0430\u0445\u043e\u0432\u043e",screen_name:"selnov_grahovo",members_count:4223,photo_50:"https://sun7-8.userapi.com/c837623/v837623569/33af1/wzcEK04Dz18.jpg?ava=1"},{id:49248213,name:"\u0418\u0436\u0435\u0432\u0441\u043a \u0413\u0434\u0435 \u0413\u0430\u0439 \u0421\u0442\u043e\u044f\u0442 (\u0418\u0413\u0413\u0421)",screen_name:"udmurtiya18rus",members_count:239515,photo_50:"https://sun7-9.userapi.com/c846218/v846218817/110f7/5kFx49u-ApU.jpg?ava=1"}]},n.closePopout=n.closePopout.bind(Object(_e.a)(n)),n.openDestructive=n.openDestructive.bind(Object(_e.a)(n)),n.removeItem=n.removeItem.bind(Object(_e.a)(n)),n.removeHandler=n.removeHandler.bind(Object(_e.a)(n)),n.openAddGroupForm=n.openAddGroupForm.bind(Object(_e.a)(n)),n}return Object(V.a)(t,e),Object(Q.a)(t,[{key:"removeItem",value:function(e){var t=this.state.groups.filter((function(t){return t.id!==e}));this.setState({groups:t})}},{key:"closePopout",value:function(){(0,this.props.setPopoutApp)(!1)}},{key:"removeHandler",value:function(e){this.openDestructive(e)}},{key:"openDestructive",value:function(e){var t=this;(0,this.props.setPopoutApp)(o.a.createElement(z.a,{actionsLayout:"vertical",actions:[{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",autoclose:!0,mode:"destructive",action:function(){return t.removeItem(e)}},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:this.closePopout},o.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c?"),o.a.createElement("p",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430?")))}},{key:"openAddGroupForm",value:function(){console.log("modal"),(0,this.props.setModalApp)(o.a.createElement(Re,{addItemHandler:this.addItem}))}}]),t}(o.a.Component)),Ue=Object(m.b)((function(e){return{state:e,popout:e.popoutApp.popout,modal:e.modalApp.modal}}),(function(e){return{dispatch:e,setPopoutApp:function(t){return e(function(e){return function(t){t({type:"SET_POPOUT",block:e})}}(t))},setModalApp:function(t){return e(ce(t))}}}))(Ce),Pe=function(e){return o.a.createElement(ne,{id:"groups"},o.a.createElement(z.q,null,"\u041e\u0431\u0449\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"),o.a.createElement(Ue,null))},Ie=(n(161),function(){return o.a.createElement(ne,{id:"layout"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430! ",o.a.createElement(u.a,{to:"/"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443..."))}),Me=(n(162),n(163),B(N,r)),Ne=Object(p.syncHistoryWithStore)(u.d,Me);l.a.send("VKWebAppInit",{}),s.a.render(o.a.createElement(m.a,{store:Me},o.a.createElement(u.c,{history:Ne},o.a.createElement(u.b,{exact:!0,path:"/",component:fe}),o.a.createElement(u.b,{exact:!0,path:"/contacts",component:Ee}),o.a.createElement(u.b,{exact:!0,path:"/faq",component:ve}),o.a.createElement(u.b,{exact:!0,path:"/groups",component:Pe}),o.a.createElement(u.b,{component:Ie}))),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.3f9741a5.chunk.js.map