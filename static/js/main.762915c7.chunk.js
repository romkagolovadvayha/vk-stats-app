(this["webpackJsonpvk-stats-app"]=this["webpackJsonpvk-stats-app"]||[]).push([[0],{123:function(e,t,n){e.exports=n(161)},142:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),s=n(33),c=n.n(s),u=n(21),i=n(16),l=n.n(i),p=n(35),m=n(28),d=n(32),E=n(61),h=n(62),f=n(10),v={loadingUser:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_INFO_REQ":return Object(f.a)({},e,{loadingUser:!0});case"GET_USER_INFO_RES":return Object(f.a)({},e,{},t.payload,{loadingUser:!1});default:return e}},b={},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"GET_AUTH_TOKEN_RES"===t.type?Object(f.a)({},e,{},t.payload):e},y={loadingGroup:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUP_REQ":return Object(f.a)({},e,{loadingGroup:!0});case"GET_GROUP_RES":return Object(f.a)({},e,{},t.payload.response[0],{loadingGroup:!1});case"GROUP_RESET_RES":return Object(f.a)({},y);default:return e}},k={loadingGroups:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUPS_REQ":return Object(f.a)({},e,{loadingGroups:!0});case"GET_GROUPS_RES":return Object(f.a)({},e,{},t.payload.response,{loadingGroups:!1});default:return e}},G={popout:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POPOUT":return Object(f.a)({},e);case"SET_POPOUT":return Object(f.a)({},e,{popout:t.block});default:return e}},x={modal:!1},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MODAL":return Object(f.a)({},e);case"SET_MODAL":return Object(f.a)({},e,{modal:t.block});default:return e}},T={loadingFriends:!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FRIENDS_REQ":return Object(f.a)({},e,{loadingFriends:!0});case"GET_FRIENDS_RES":return Object(f.a)({},e,{},t.payload.response,{loadingFriends:!1});default:return e}},A={loadingResolveScreenName:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RESOLVE_SCREEN_NAME_REQ":return Object(f.a)({},e,{loadingResolveScreenName:!0});case"GET_RESOLVE_SCREEN_NAME_RES":return Object(f.a)({},e,{},t.payload.response,{loadingResolveScreenName:!1});default:return e}},U={loadingUserBy:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_REQ":return Object(f.a)({},e,{loadingUserBy:!0});case"GET_USER_RES":return Object(f.a)({},e,{},t.payload,{loadingUserBy:!1});default:return e}},F={loadingExecuteGetMembers:!1,loadingExecuteGetFriends:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EXECUTE_GET_MEMBERS_REQ":return Object(f.a)({},e,{loadingExecuteGetMembers:!0});case"GET_EXECUTE_GET_MEMBERS_RES":return Object(f.a)({},e,{},t.payload.response,{loadingExecuteGetMembers:!1});case"GET_EXECUTE_GET_FRIENDS_REQ":return Object(f.a)({},e,{loadingExecuteGetFriends:!0});case"GET_EXECUTE_GET_FRIENDS_RES":return Object(f.a)({},e,{},t.payload.response,{loadingExecuteGetFriends:!1});default:return e}},M=Object(d.c)({routing:p.routerReducer,user:g,token:_,group:O,groups:j,popoutApp:S,modalApp:R,friends:C,utils:w,userBy:I,execute:P}),N=Object(E.createLogger)(),L=Object(p.routerMiddleware)(u.d),B=Object(d.a)(h.a,L,N)(d.d),D=n(23),H=n(29),Q=n(25),V=n(24),K=n(26),X=(n(142),n(4)),W=n(74),z=n.n(W),q=n(75),J=n.n(q),Y=n(76),Z=n.n(Y),$=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).state=void 0,n.onStoryChange=function(e){var t=e.currentTarget.dataset.story;n.setState({activeStory:t}),u.d.push("".concat(t))},n.render=function(){var e=n.state.activeStory;return o.a.createElement(X.z,null,o.a.createElement(X.A,{onClick:function(e){return n.onStoryChange(e)},selected:"/"===e,"data-story":"/",text:"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f"},o.a.createElement(Z.a,null)),o.a.createElement(X.A,{onClick:function(e){return n.onStoryChange(e)},selected:"/contacts"===e,"data-story":"/contacts",text:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"},o.a.createElement(z.a,null)),o.a.createElement(X.A,{onClick:function(e){return n.onStoryChange(e)},selected:"/faq"===e,"data-story":"/faq",text:"\u041f\u043e\u043c\u043e\u0449\u044c"},o.a.createElement(J.a,null)))},n.state={activeStory:u.d.getCurrentLocation().pathname},n}return Object(K.a)(t,e),t}(o.a.Component),ee=Object(m.b)((function(e){return{state:e,activeStory:e.activeStory}}),(function(e){return{dispatch:e}}))($),te=function(e){var t=e.popout,n=e.modal;return o.a.createElement(X.C,{popout:t,modal:n,activePanel:e.id},o.a.createElement(X.r,{id:e.id},o.a.createElement("div",{style:{paddingBottom:"50px"}},e.children),o.a.createElement(ee,null)))},ne=Object(m.b)((function(e){return{popout:e.popoutApp.popout,modal:e.modalApp.modal}}))(te),re=n(7),ae=n.n(re),oe=n(9),se=function(e){return function(t){t({type:"SET_MODAL",block:e})}},ce=(n(153),function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).getUser=Object(oe.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.getUserInfo,e.next=3,t();case 3:case"end":return e.stop()}}),e)}))),n.render=function(){var e=n.props,t=e.loadingUser,r=e.user;return o.a.createElement("div",{className:"User"},t&&o.a.createElement(X.y,{size:"medium"}),r.first_name&&o.a.createElement(X.u,{status:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",before:o.a.createElement(X.b,{size:36,src:r.photo_100}),aside:""},r.first_name," ",r.last_name))},n.props.user.first_name||n.getUser(),n}return Object(K.a)(t,e),t}(o.a.Component)),ue=Object(m.b)((function(e){return{state:e,user:e.user,loadingUser:e.user.loadingUser}}),(function(e){return{dispatch:e,getUserInfo:function(){return e(function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USER_INFO_REQ"}),e.prev=1,e.next=4,l.a.sendPromise("VKWebAppGetUserInfo");case 4:return n=e.sent,t({type:"GET_USER_INFO_RES",payload:n}),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),t({type:"GET_USER_INFO_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(ce),ie=n(77),le=n.n(ie),pe=n(78),me=n.n(pe),de=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).render=function(){return o.a.createElement(ne,{id:"home"},o.a.createElement(X.s,null,"\u0410\u043d\u0430\u043b\u0438\u0437 \u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),o.a.createElement(X.h,{className:"profile"},o.a.createElement(ue,null)),o.a.createElement(X.x,{wide:!0}),o.a.createElement(X.n,{className:"navigationList"},o.a.createElement(u.a,{to:"/groups"},o.a.createElement(X.f,{before:o.a.createElement(me.a,null)},"\u041e\u0431\u0449\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438")),o.a.createElement(X.x,{wide:!0}),o.a.createElement(u.a,{to:"/securityUser"},o.a.createElement(X.f,{before:o.a.createElement(le.a,null)},"\u0423\u0437\u043d\u0430\u0442\u044c \u0441\u043a\u0440\u044b\u0442\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"))))},n.fetchData(),n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"fetchData",value:function(){(0,this.props.getAuthToken)()}}]),t}(o.a.Component),Ee=Object(m.b)(null,(function(e){return{dispatch:e,getAuthToken:function(){return e(function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_AUTH_TOKEN_REQ"}),e.prev=1,e.next=4,l.a.sendPromise("VKWebAppGetAuthToken",{app_id:7312864,scope:"groups,stats"});case 4:return n=e.sent,t({type:"GET_AUTH_TOKEN_RES",payload:n}),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),t({type:"GET_AUTH_TOKEN_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(de),he=(n(154),function(){return o.a.createElement(ne,{id:"contacts"},o.a.createElement(X.s,null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),o.a.createElement(X.h,null,"Contacts page..."))}),fe=function(){return o.a.createElement(ne,{id:"faq"},o.a.createElement(X.s,null,"\u041f\u043e\u043c\u043e\u0449\u044c"),o.a.createElement(X.j,{separator:"hide",header:o.a.createElement(X.k,{mode:"secondary"},"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u043d\u043e\u0435?")},o.a.createElement(X.e,null,o.a.createElement(X.d,{size:"l"},o.a.createElement(X.h,null,"\u0423 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043d\u043e \u0432 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u0435\u0442 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b.")))),o.a.createElement(X.j,{separator:"hide",header:o.a.createElement(X.k,{mode:"secondary"},"\u0418\u0434\u0435\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f")},o.a.createElement(X.e,null,o.a.createElement(X.d,{size:"l"},o.a.createElement(X.h,null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u0430\u043c \u0441\u0432\u043e\u044e \u0438\u0434\u0435\u044e, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438.")))))},ve=n(27),ge=n(79),be=n.n(ge),_e=(n(155),n(80)),ye=n.n(_e),Oe=function(e){function t(){var e,n;Object(D.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(Q.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(a)))).render=function(){var e=n.props,t=e.id,r=e.photo,a=e.removeHandler,s=e.membersCount;return o.a.createElement("div",{className:"groupItem"},o.a.createElement("div",{className:"photo"},o.a.createElement(X.b,{src:r})),o.a.createElement("div",{className:"remove",onClick:function(e){return a(t)}},o.a.createElement(X.b,{style:{background:"var(--destructive)"},size:24},o.a.createElement(ye.a,{fill:"var(--white)"}))),s>0&&o.a.createElement("div",{className:"membersCount"},n.getMembersCount(s)))},n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"getMembersCount",value:function(e){var t="".concat(e),n=parseFloat((e/1e6).toFixed(1));return Math.trunc(n)>0?t="".concat(n,"\u041c"):(n=parseFloat((e/1e3).toFixed(1)),Math.trunc(n)>0?t="".concat(n,"\u041a"):t)}}]),t}(o.a.Component),ke=n(43),je=n.n(ke),Ge=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).state=void 0,n.modalBack=function(){return(0,n.props.setModalApp)(!1),{}},n.selectItem=function(e){(0,n.props.addItemHandler)(e),n.modalBack()},n.state={search:"",items:[]},n.onChange=n.onChange.bind(Object(ve.a)(n)),n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"onChange",value:function(e){if(e.target.value.indexOf("com/")>=0){var t=e.target.value.split("com/")[1];this.isItem(t)||this.getResolveScreenName(t)}this.setState({search:e.target.value})}},{key:"getResolveScreenName",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r,a,o;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.token,a=n.getResolveScreenName,e.next=3,a(t,r.access_token);case 3:if((o=e.sent)&&o.type){e.next=7;break}return console.log("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"),e.abrupt("return");case 7:e.t0=o.type,e.next="group"===e.t0?10:"page"===e.t0?10:"user"===e.t0?13:16;break;case 10:return e.next=12,this.searchGroup(o.object_id,o.type);case 12:return e.abrupt("break",17);case 13:return e.next=15,this.searchUser(o.object_id,o.type);case 15:return e.abrupt("break",17);case 16:console.log("\u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isItem",value:function(e){for(var t=this.state.items,n=0;n<t.length;n++)if(t[n].screen_name===e)return!0;return!1}},{key:"searchGroup",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t,n){var r,a,o,s,c,u;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,a=r.token,o=r.getGroup,e.next=3,o(t,a.access_token);case 3:s=e.sent,c=this.state.items,(u=c)[u.length]={id:s.id,name:s.name,photo_50:s.photo_50,screen_name:s.screen_name,members_count:s.members_count,type:n},this.setState({items:u});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"searchUser",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t,n){var r,a,o,s,c,u;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,a=r.token,o=r.getUser,e.next=3,o(t,a.access_token);case 3:s=e.sent,c=this.state.items,(u=c)[u.length]={id:s.id,name:"".concat(s.first_name," ").concat(s.last_name),photo_50:s.photo_50,screen_name:s.domain,type:n},this.setState({items:u});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupsList();case 2:return e.next=4,this.getFriendsList();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGroupsList",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.token,r=t.getGroups,a=t.groups,o=a,s=this.state.items,o.count){e.next=7;break}return e.next=6,r(n.access_token);case 6:o=e.sent;case 7:o=o.items.map((function(e){return{id:e.id,name:e.name,photo_50:e.photo_50,screen_name:e.screen_name,members_count:e.members_count,type:e.type}})),this.setState({items:s.concat(o)});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFriendsList",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.token,r=t.getFriends,a=t.friends,o=a,s=this.state.items,o.count){e.next=7;break}return e.next=6,r(n.access_token);case 6:o=e.sent;case 7:o=o.items.map((function(e){return{id:e.id,name:"".concat(e.first_name," ").concat(e.last_name),screen_name:e.domain,photo_50:e.photo_50,type:"user"}})),this.setState({items:s.concat(o)});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.loadingGroups,r=t.loadingFriends,a=n||r,s=this.state.search;return o.a.createElement(X.q,{activeModal:"modalFormAddGroups"},o.a.createElement(X.o,{id:"modalFormAddGroups",dynamicContentHeight:!0,onClose:this.modalBack,header:o.a.createElement(X.p,{left:o.a.createElement(X.t,{onClick:this.modalBack},o.a.createElement(je.a,null))},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")},o.a.createElement(X.w,{value:s,onChange:this.onChange}),a&&o.a.createElement(X.h,null,o.a.createElement(X.y,{size:"medium"})),!a&&s.length>0&&o.a.createElement(X.n,null,this.items.slice(0,5).map((function(t){return o.a.createElement(X.f,{before:o.a.createElement(X.b,{size:40,src:t.photo_50}),onClick:function(){return e.selectItem(t)},key:t.screen_name},t.name)}))),!a&&0===s.length&&o.a.createElement(X.h,{style:{color:"gray"}},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0438\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.")))}},{key:"items",get:function(){var e=this.state,t=e.search,n=e.items,r=t.indexOf("com/")>=0,a="";return r&&(a=t.split("com/")[1]),n.filter((function(e){var n=e.name,o=e.screen_name;return r?o.toLowerCase().indexOf(a.toLowerCase())>-1:n.toLowerCase().indexOf(t.toLowerCase())>-1}))}}]),t}(o.a.Component),Se=Object(m.b)((function(e){return{state:e,token:e.token,groups:e.groups,group:e.group,userBy:e.userBy,utils:e.utils,friends:e.friends,loadingGroups:e.groups.loadingGroups,loadingFriends:e.groups.loadingFriends,loadingGroup:e.group.loadingGroup,loadingUserBy:e.group.loadingUserBy,loadingResolveScreenName:e.utils.loadingResolveScreenName,modal:e.modalApp.modal}}),(function(e){return{dispatch:e,setModalApp:function(t){return e(se(t))},getGroups:function(t){return e(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_GROUPS_REQ"}),t.prev=1,t.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.get",params:{extended:"1",fields:"id,is_admin,admin_level,name,photo_50,screen_name,type,members_count",v:"5.102",access_token:e}});case 4:return r=t.sent,n({type:"GET_GROUPS_RES",payload:r}),t.abrupt("return",r.response);case 9:t.prev=9,t.t0=t.catch(1),n({type:"GET_GROUPS_FAIL",payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},getFriends:function(t){return e(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_FRIENDS_REQ"}),t.prev=1,t.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"friends.get",params:{fields:"photo_50, domain",v:"5.102",access_token:e}});case 4:return r=t.sent,n({type:"GET_FRIENDS_RES",payload:r}),t.abrupt("return",r.response);case 9:t.prev=9,t.t0=t.catch(1),n({type:"GET_FRIENDS_FAIL",payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},getGroup:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_GROUP_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"groups.getById",params:{group_id:e,fields:"id,is_admin,admin_level,name,photo_50,screen_name,type,members_count",v:"5.102",access_token:t}});case 4:return a=n.sent,r({type:"GET_GROUP_RES",payload:a}),n.abrupt("return",a.response[0]);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_GROUP_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getUser:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_USER_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"users.get",params:{user_ids:e,fields:"photo_50, domain",v:"5.102",access_token:t}});case 4:return a=n.sent,r({type:"GET_USER_RES",payload:a}),n.abrupt("return",a.response[0]);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_USER_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},getResolveScreenName:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_RESOLVE_SCREEN_NAME_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"utils.resolveScreenName",params:{screen_name:e,v:"5.27",https:1,access_token:t}});case 4:return a=n.sent,r({type:"GET_RESOLVE_SCREEN_NAME_RES",payload:a}),n.abrupt("return",a.response);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_RESOLVE_SCREEN_NAME_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(Ge),xe=(n(156),n(81)),Re=n.n(xe),Te=n(52),Ce=n.n(Te),Ae=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).render=function(){var e=n.props.items,t=n.state.separator,r=e.join(t);return o.a.createElement("div",null,o.a.createElement(X.j,{header:o.a.createElement(X.k,{mode:"secondary"},"\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",e.length," \u043e\u0431\u0449\u0438\u0445 \u0447\u0435\u043b\u043e\u0432\u0435\u043a")},o.a.createElement(X.i,null,o.a.createElement(X.B,{top:"ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",value:r})),o.a.createElement(X.n,null,o.a.createElement(X.f,{before:o.a.createElement(Ce.a,null)},"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 TXT"),o.a.createElement(X.f,{before:o.a.createElement(Ce.a,null)},"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 EXCEL"))))},n.state={separator:", "},n}return Object(K.a)(t,e),t}(o.a.Component),we=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).render=function(){var e=n.state,t=e.progress,r=e.process,a=e.intersec,s=e.isStart,c=n.props.items;return o.a.createElement("div",null,c.length>1&&o.a.createElement(X.h,null,o.a.createElement(X.c,{onClick:n.startButton,before:o.a.createElement(Re.a,null),disabled:r},"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435")),r&&o.a.createElement(X.h,null,o.a.createElement(X.l,{header:!1,title:"Default"},o.a.createElement(X.v,{value:t}))),!r&&s&&o.a.createElement(Ae,{items:a}))},n.state={progress:0,process:!1,intersec:[],isStart:!1},n.startButton=n.startButton.bind(Object(ve.a)(n)),n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"start",value:function(){var e=Object(oe.a)(ae.a.mark((function e(){var t,n,r,a,o,s,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.startProcess(),t=this.props.items,n=0,r=0;r<t.length;r++)n+=t[r].members_count;a=0,o=[],s=0;case 7:if(!(s<t.length)){e.next=26;break}c=[],e.t0=t[s].type,e.next="group"===e.t0?12:"page"===e.t0?12:"user"===e.t0?16:20;break;case 12:return e.next=14,this.getMembersByGroupId(t[s].id,t[s].members_count,n,a);case 14:return c=e.sent,e.abrupt("break",20);case 16:return e.next=18,this.getMembersByUserId(t[s].id);case 18:return c=e.sent,e.abrupt("break",20);case 20:c=c.map((function(e){return parseInt(e)})),a+=c.length,o=0===o.length?c:this.intersecSortArr(o,c);case 23:s++,e.next=7;break;case 26:this.setState({intersec:o}),this.stopProcess();case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"intersecSortArr",value:function(e,t){for(var n=e.length,r=t.length,a=0,o=0,s=0,c=[];a<n&&s<r;)e[a]===t[s]?(c[o]=e[a],o++,a++,s++):e[a]<t[s]?a++:s++;return c}},{key:"getMembersByGroupId",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t,n,r,a){var o,s,c,u,i,l,p,m,d;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=this.props,c=s.token,u=s.getExecuteGetMembers,i=[],l=0;case 4:if(!(i.length<n&&l<n)){e.next=17;break}return e.next=7,u(t,l,n,c.access_token);case 7:return p=e.sent,i=i.concat(p),l+=25e3,m=a+i.length,d=Math.ceil(m/r*100),this.setProgress(d),e.next=15,o(334);case 15:e.next=4;break;case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getMembersByUserId",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r,a,o,s;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},r=this.props,a=r.token,o=r.getExecuteGetFriends,e.next=4,o(t,a.access_token);case 4:return s=e.sent,e.next=7,n(334);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startProcess",value:function(){console.log("startProcess"),this.setState({progress:0,process:!0})}},{key:"setProgress",value:function(e){this.setState({progress:e})}},{key:"stopProcess",value:function(){console.log("stopProcess"),this.setState({progress:0,process:!1})}},{key:"startButton",value:function(){this.start(),this.setState({isStart:!0})}}]),t}(o.a.Component),Ue=Object(m.b)((function(e){return{state:e,token:e.token,execute:e.execute,loadingExecuteGetMembers:e.execute.loadingExecuteGetMembers,loadingExecuteGetFriends:e.execute.loadingExecuteGetFriends}}),(function(e){return{dispatch:e,getExecuteGetMembers:function(t,n,r,a){return e(function(e,t,n,r){return function(){var a=Object(oe.a)(ae.a.mark((function a(o){var s;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o({type:"GET_EXECUTE_GET_MEMBERS_REQ"}),a.prev=1,a.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"execute.getMembers",params:{group_id:e,offset:t,total_count:n,v:"5.102",access_token:r}});case 4:return s=a.sent,o({type:"GET_EXECUTE_GET_MEMBERS_RES",payload:s}),a.abrupt("return",s.response);case 9:a.prev=9,a.t0=a.catch(1),o({type:"GET_EXECUTE_GET_MEMBERS_FAIL",payload:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(t,n,r,a))},getExecuteGetFriends:function(t,n){return e(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var a;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"GET_EXECUTE_GET_FRIENDS_REQ"}),n.prev=1,n.next=4,l.a.sendPromise("VKWebAppCallAPIMethod",{method:"execute.getFriends",params:{user_ids:e,v:"5.102",access_token:t}});case 4:return a=n.sent,r({type:"GET_EXECUTE_GET_FRIENDS_RES",payload:a}),n.abrupt("return",a.response);case 9:n.prev=9,n.t0=n.catch(1),r({type:"GET_EXECUTE_GET_FRIENDS_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(we),Ie=(n(157),function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).state=void 0,n.addItem=function(e){console.log(e);var t=n.state.groups;t[t.length]=e,n.setState({groups:t})},n.render=function(){var e=n.state.groups;return o.a.createElement("div",null,o.a.createElement(X.g,{onClick:n.openAddGroupForm,before:o.a.createElement(be.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e"),o.a.createElement(X.x,{wide:!0}),e.length>0&&o.a.createElement("div",null,o.a.createElement("div",{className:"groupsList"},e.map((function(e){return o.a.createElement(Oe,{key:e.id,photo:e.photo_50,id:e.id,membersCount:e.members_count,removeHandler:n.removeHandler})}))),o.a.createElement(Ue,{items:n.state.groups})),e.length<2&&o.a.createElement(X.h,null,"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 2 \u0438 \u0431\u043e\u043b\u0435\u0435 \u043e\u0431\u044c\u0435\u043a\u0442\u0430 \u0434\u043b\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f"))},n.state={groups:[]},n.closePopout=n.closePopout.bind(Object(ve.a)(n)),n.openDestructive=n.openDestructive.bind(Object(ve.a)(n)),n.removeItem=n.removeItem.bind(Object(ve.a)(n)),n.removeHandler=n.removeHandler.bind(Object(ve.a)(n)),n.openAddGroupForm=n.openAddGroupForm.bind(Object(ve.a)(n)),n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"removeItem",value:function(e){var t=this.state.groups.filter((function(t){return t.id!==e}));this.setState({groups:t})}},{key:"closePopout",value:function(){(0,this.props.setPopoutApp)(!1)}},{key:"removeHandler",value:function(e){this.openDestructive(e)}},{key:"openDestructive",value:function(e){var t=this;(0,this.props.setPopoutApp)(o.a.createElement(X.a,{actionsLayout:"vertical",actions:[{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",autoclose:!0,mode:"destructive",action:function(){return t.removeItem(e)}},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:this.closePopout},o.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c?"),o.a.createElement("p",null,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430?")))}},{key:"openAddGroupForm",value:function(){console.log("modal"),(0,this.props.setModalApp)(o.a.createElement(Se,{addItemHandler:this.addItem}))}}]),t}(o.a.Component)),Fe=Object(m.b)((function(e){return{state:e,popout:e.popoutApp.popout,modal:e.modalApp.modal}}),(function(e){return{dispatch:e,setPopoutApp:function(t){return e(function(e){return function(t){t({type:"SET_POPOUT",block:e})}}(t))},setModalApp:function(t){return e(se(t))}}}))(Ie),Pe=function(e){return o.a.createElement(ne,{id:"groups"},o.a.createElement(X.s,null,"\u041e\u0431\u0449\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"),o.a.createElement(Fe,null))},Me=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(Q.a)(this,Object(V.a)(t).call(this,e))).state=void 0,n.render=function(){var e=n.state,t=e.search,r=e.error,a=e.loading;return o.a.createElement(ne,{id:"groups"},o.a.createElement(X.s,null,"\u0421\u043a\u0440\u044b\u0442\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),o.a.createElement(X.h,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),o.a.createElement(X.h,null,o.a.createElement(X.m,{type:"text",placeholder:"https://vk.com/******",value:t,onChange:n.onChange}),o.a.createElement(X.c,{size:"l",style:{marginTop:"10px"},onClick:n.getInformationHandler},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e")),a&&o.a.createElement(X.h,null,o.a.createElement(X.y,{size:"medium",style:{marginTop:20}})),r.length>0&&o.a.createElement(X.h,{style:{color:"red"}},r))},n.state={search:"",error:"",loading:!1},n.getInformationHandler=n.getInformationHandler.bind(Object(ve.a)(n)),n.onChange=n.onChange.bind(Object(ve.a)(n)),n}return Object(K.a)(t,e),Object(H.a)(t,[{key:"getInformationHandler",value:function(e){var t=this.state.search;if(t.indexOf("com/")<0)this.setState({error:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u043e!"});else{this.setState({error:""});var n=t.split("com/")[1];this.start(n)}}},{key:"start",value:function(){var e=Object(oe.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),console.log("start",t),this.setState({loading:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({search:e.target.value})}}]),t}(o.a.Component),Ne=(n(158),function(){return o.a.createElement(ne,{id:"layout"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430! ",o.a.createElement(u.a,{to:"/"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443..."))}),Le=(n(159),n(160),B(M,r)),Be=Object(p.syncHistoryWithStore)(u.d,Le);l.a.send("VKWebAppInit",{}),c.a.render(o.a.createElement(m.a,{store:Le},o.a.createElement(u.c,{history:Be},o.a.createElement(u.b,{exact:!0,path:"/",component:Ee}),o.a.createElement(u.b,{exact:!0,path:"/contacts",component:he}),o.a.createElement(u.b,{exact:!0,path:"/faq",component:fe}),o.a.createElement(u.b,{exact:!0,path:"/groups",component:Pe}),o.a.createElement(u.b,{exact:!0,path:"/securityUser",component:Me}),o.a.createElement(u.b,{component:Ne}))),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.762915c7.chunk.js.map